(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{329:function(t,e,n){var content=n(375);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(11).default)("e7408230",content,!0,{sourceMap:!1})},374:function(t,e,n){"use strict";var r=n(329);n.n(r).a},375:function(t,e,n){(e=n(10)(!1)).push([t.i,".v-data-table th{font-size:1rem!important}.v-data-table td{font-size:1.15rem!important}",""]),t.exports=e},433:function(t,e,n){"use strict";n.r(e);n(46);var r=n(13),o=(n(33),n(54),n(55),n(17),n(15)),l=(n(371),n(5),n(4),n(75),n(321),n(101),n(62),n(372)),c=n.n(l),d=n(373),m=n.n(d);c.a.vfs=m.a.pdfMake.vfs;var i=["2019-12-23","2019-12-30"],v={inject:["theme"],data:function(){return{transactions:0,loading:!1,items:[],suggestions:[],search:null,select:null,reload:!0,tableReload:!0,token:"",totalColor:"#424242",startDate:"2020-04-15",mintDate:"2020-01-01",endDate:"2020-04-15",menu:!1,menu2:!1,clientCharge:0,workerCharge:0,itemsPerPage:1e4,singleSelect:!1,singleSelect2:!1,selected:[],selected2:[],total:0,headers:[{text:"Date Created",align:"center",value:"created_at"},{text:"Description",align:"left",value:"description"},{text:"Quantity",align:"center",value:"quantity"},{text:"Rate",align:"center",value:"rate_per_ton"},{text:"Equivalent",align:"center",value:"total_amount"},{text:"Remarks",align:"center",value:"remarks"}],headers2:[{text:"Date Created",align:"left",value:"created_at"},{text:"Description",align:"left",value:"description"},{text:"Service",align:"left",value:"Service"},{text:"Quantity",align:"left",value:"quantity"},{text:"Unit",align:"left",value:"Unit"},{text:"Rate",align:"left",value:"rate_per_ton_worker"},{text:"Equivalent",align:"left",value:"total_amount_workers"},{text:"Remarks",align:"left",value:"remarks"}]}},name:"Todos",computed:{userID:function(){return this.$store.state.user.id},transactionsSuggestion:function(){for(var t=this.$store.state.transactions.suggestionList,e=[],i=0;i<t.length;i++)e.push(t[i].description),this.suggestions.push(t[i].description);return e},PJCCtransactionss:function(){return this.$store.state.transactions.PJCCtransactions},distinctServices:function(){for(var t=this.$store.state.transactions.PJCCtransactions,e=[],map=new Map,n=0,r=Object.entries(t);n<r.length;n++){var l=Object(o.a)(r[n],2),c=(l[0],l[1]);map.has(c.Service)||(map.set(c.Service,!0),e.push({name:c.Service,unit:c.Unit}))}return e},transactCount:function(){for(var t=this.$store.state.transactions.PJCCtransactions,e=0,i=0;i<t.length;i++)e+=parseFloat(t[i].total_amount);return this.clientCharge=e,Number(e.toFixed(2)).toLocaleString(void 0,{minimumFractionDigits:2})},transactCountWorkers:function(){for(var t=this.$store.state.transactions.PJCCtransactions,e=0,i=0;i<t.length;i++)e+=parseFloat(t[i].total_amount_workers);return this.workerCharge=e,"Php. ".concat(Number(e.toFixed(2)).toLocaleString(void 0,{minimumFractionDigits:2}))},totalAmount:function(){var t=this.clientCharge-this.workerCharge;return Number(t.toFixed(2)).toLocaleString(void 0,{minimumFractionDigits:2})}},beforeMount:function(){this.updateTransaction()},created:function(){this.$store.dispatch("transactions/getList")},watch:{search:function(t){t&&t!==this.select&&this.querySelections(t)}},methods:{allowedDatess:function(t){return-1!==i.indexOf(t)},buildTableBody:function(data,t,e,n){var body=[];return body.push([{alignment:"center",bold:!0,margin:[0,5,0,0],text:"Date Created"},{alignment:"center",bold:!0,margin:[0,5,0,0],text:"Description"},{alignment:"center",bold:!0,margin:[0,5,0,0],text:"Quantity"},{alignment:"center",bold:!0,text:"Rate per \n ".concat(n)},{alignment:"center",bold:!0,margin:[0,5,0,0],text:"Equivalent"},{alignment:"center",bold:!0,margin:[0,5,0,0],text:"Remarks"}]),data.forEach((function(e){var n=[];t.forEach((function(t){n.push({text:e[t].toString(),alignment:"center",color:"#505050",fontSize:10})})),body.push(n)})),body.push([{alignment:"center",colSpan:2,fillColor:"#cccccc",text:""},{},{alignment:"center",colSpan:2,fillColor:"#cccccc",text:""},{},{alignment:"center",bold:!0,colSpan:2,fillColor:"#cccccc",text:this.totalPerServices(e)},{}]),body},table:function(t){for(var e=[],i=0;i<this.distinctServices.length;i++)e.push({fontSize:14,bold:!0,text:this.distinctServices[i].name},{margin:[0,5,0,30],table:{alignment:"center",widths:[75,155,60,50,60,70],headerRows:0,body:this.buildTableBody(this.filterTransaction(this.distinctServices[i].name),t,this.distinctServices[i].name,this.distinctServices[i].unit)}});return e},downloadPDF:function(){var t={content:[{table:{headerRows:0,widths:[300,200],body:[[{table:{headerRows:0,body:[[{fontSize:14,bold:!0,text:"PJCC HANDLING SERVICES"}],[{fontSize:11,text:"973 Pulo St. Matungao Bulakan, Bulacan 0975-3600-374 /0919-3369064/m (044) 764-3130"}],[{fontSize:11,text:"pcjhandlingservices@gmail.com",color:"#0000ff"}]]},layout:"noBorders"},{fontSize:12,bold:!0,alignment:"right",color:"#b1b1b1",text:"RECEIVING COPY   95th"}],[{margin:[0,0,0,20],table:{heights:[15,25,25],widths:[50,220],body:[[{alignment:"center",fontSize:10,bold:!0,margin:[0,4,0,0],text:"Date"},{alignment:"center",bold:!0,fontSize:10,margin:[0,4,0,0],text:"4/20/2020"}],[{alignment:"center",bold:!0,fontSize:10,margin:[0,6,0,0],text:"Division"},{alignment:"center",bold:!0,fontSize:10,margin:[0,6,0,0],text:"TEXICON AGRI VENTURES CORP AQUA"}],[{alignment:"center",bold:!0,fontSize:10,margin:[0,1,0,0],text:"Billing\n Period: "},{alignment:"center",bold:!0,fontSize:10,margin:[0,6,0,0],text:"APRIL 13 TO 19, 2020"}]]}},{table:{widths:[100,100],headerRows:0,body:[[{border:[!1,!1,!0,!1],fontSize:12,bold:!0,alignment:"left",color:"#b1b1b1",text:"GRAND TOTAL:"},{fontSize:12,bold:!0,alignment:"center",fillColor:"#cccccc",text:this.transactCount}]]}}]]},layout:"noBorders"},this.table(["created_at_formatted","description","quantity","rate_per_ton","total_formatted","remarks"]),{table:{margin:[0,25,0,0],widths:[250,100],headerRows:0,body:[[{fontSize:12,bold:!0,alignment:"left",fillColor:"#cccccc",text:"GRAND TOTAL"},{fontSize:12,bold:!0,alignment:"center",fillColor:"#cccccc",text:this.transactCount}]]}},{margin:[0,5,0,40],fontSize:12,italics:!0,alignment:"left",fillColor:"#cccccc",text:"* PAYMENT SCHEDULE: : Weekly Billing depending on your cut-off"},{table:{widths:[80,150,10,80,150],headerRows:0,body:[[{border:[!1,!1,!1,!1],fontSize:10,bold:!0,alignment:"center",text:"PREPARED BY:"},{border:[!1,!1,!1,!0],fontSize:10,alignment:"center",text:"NOEL MADLANG-AWA"},{border:[!1,!1,!1,!1],text:""},{border:[!1,!1,!1,!1],fontSize:10,bold:!0,alignment:"center",text:"CHECKED BY:"},{border:[!1,!1,!1,!0],fontSize:10,alignment:"center",text:"JOHN MICHAEL MADLANG-AWA"}],[{border:[!1,!1,!1,!1],text:""},{border:[!1,!1,!1,!1],fontSize:10,italics:!0,alignment:"center",text:"Signature Over Printed Name"},{border:[!1,!1,!1,!1],text:""},{border:[!1,!1,!1,!1],fontSize:10,text:""},{border:[!1,!1,!1,!1],fontSize:10,italics:!0,alignment:"center",text:"Signature Over Printed Name"}],[{margin:[0,30,0,0],border:[!1,!1,!1,!1],fontSize:10,bold:!0,alignment:"center",text:"RECEIVED BY:"},{margin:[0,30,0,0],border:[!1,!1,!1,!0],text:""},{margin:[0,30,0,0],border:[!1,!1,!1,!1],text:""},{margin:[0,30,0,0],border:[!1,!1,!1,!1],text:""},{margin:[0,30,0,0],border:[!1,!1,!1,!1],text:""}],[{border:[!1,!1,!1,!1],text:""},{border:[!1,!1,!1,!1],fontSize:10,italics:!0,alignment:"center",text:"Signature Over Printed Name"},{border:[!1,!1,!1,!1],text:""},{border:[!1,!1,!1,!1],fontSize:10,text:""},{border:[!1,!1,!1,!1],text:""}]]}}]};c.a.createPdf(t).download()},checkDate:function(){if(new Date(this.startDate)>new Date(this.endDate))return alert("Invalid Date"),!1},updateTransaction:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("user/accountInfo");case 2:return n={dateStart:t.startDate,dateEnd:t.endDate,userID:t.userID},e.next=5,t.$store.dispatch("transactions/getTransactionsFiltered",n);case 5:t.tableReload=!t.tableReload;case 6:case"end":return e.stop()}}),e)})))()},filterTransaction:function(t){return this.$store.state.transactions.PJCCtransactions.filter((function(i){return i.Service===t}))},totalPerServices:function(t){for(var e=this.$store.state.transactions.PJCCtransactions,n=0,i=0;i<e.length;i++)e[i].Service==t&&(n+=parseFloat(e[i].total_amount));return Number(n.toFixed(2)).toLocaleString(void 0,{minimumFractionDigits:2})},querySelections:function(t){var e=this;this.loading=!0,setTimeout((function(){e.items=e.suggestions.filter((function(e){return(e||"").toLowerCase().indexOf((t||"").toLowerCase())>-1})),e.loading=!1}),500)}},updated:function(){this.checkDate(),this.reload=!1}},f=(n(374),n(56)),h=n(78),x=n.n(h),_=n(427),S=n(134),C=n(347),D=n(424),k=n(429),y=n(428),w=n(346),R=n(336),P=n(337),z=n(351),E=n(426),A=n(334),T=n(357),L=n(313),V=n(350),component=Object(f.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",[n("v-flex",{staticClass:"text-center"},[n("v-row",{staticClass:"justify-lg-center"},[n("v-skeleton-loader",{attrs:{loading:t.tableReload,type:"chip"}},[n("v-chip",{staticClass:"ma-2 title",attrs:{color:"blue","text-color":"white"}},[t._v("\n            Php. "+t._s(t.transactCount)+" \n        ")]),t._v(" -\n      ")],1),t._v(" "),n("v-skeleton-loader",{attrs:{loading:t.tableReload,type:"chip"}},[n("v-chip",{staticClass:"ma-2 title",attrs:{color:"red","text-color":"white"}},[t._v("\n              "+t._s(t.transactCountWorkers)+"\n        ")]),t._v(" =\n      ")],1),t._v(" "),n("v-skeleton-loader",{attrs:{loading:t.tableReload,type:"chip"}},[n("v-chip",{staticClass:"ma-2 title",attrs:{color:"green","text-color":"white"}},[t._v("\n          Php. "+t._s(t.totalAmount)+"\n        ")])],1)],1),t._v(" "),n("v-row",[n("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"3"}},[n("v-skeleton-loader",{attrs:{loading:t.reload,type:"button"}},[n("v-select",{attrs:{items:t.PJCCtransactionss,"item-text":"client_id","item-value":"client_id",label:"Outlined style",outlined:""}})],1)],1),t._v(" "),n("v-col",{attrs:{cols:"12",sm:"6",md:"2"}},[n("v-skeleton-loader",{attrs:{loading:t.reload,type:"date-picker-options"}},[n("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":t.startDate,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(e){t.startDate=e},"update:return-value":function(e){t.startDate=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-text-field",t._g({attrs:{label:"Start Date","prepend-icon":"",readonly:""},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}},r))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t._v(" "),n("v-date-picker",{attrs:{scrollable:"",min:t.mintDate},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}},[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v("Cancel")]),t._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.tableReload=!t.tableReload,t.$refs.menu.save(t.startDate),t.updateTransaction()}}},[t._v("OK")])],1)],1)],1)],1),t._v(" "),n("v-col",{attrs:{cols:"12",sm:"6",md:"2"}},[n("v-skeleton-loader",{attrs:{loading:t.reload,type:"date-picker-options"}},[n("v-menu",{ref:"menu2",attrs:{"close-on-content-click":!1,"return-value":t.endDate,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(e){t.endDate=e},"update:return-value":function(e){t.endDate=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-text-field",t._g({attrs:{label:"End Date","prepend-icon":"",readonly:""},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}},r))]}}]),model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[t._v(" "),n("v-date-picker",{attrs:{scrollable:"",min:t.mintDate},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}},[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v("Cancel")]),t._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.tableReload=!t.tableReload,t.$refs.menu2.save(t.endDate),t.updateTransaction()}}},[t._v("OK")])],1)],1)],1)],1),t._v(" "),n("div",{staticClass:"my-2"},[n("v-btn",{attrs:{small:"",color:"primary"},on:{click:t.downloadPDF}},[t._v("Download PDF")])],1)],1),t._v(" "),n("v-skeleton-loader",{staticClass:"mx-4",attrs:{loading:t.reload,type:"list-item"}},[n("v-autocomplete",{staticClass:"mx-4",attrs:{items:t.items,"search-input":t.search,"cache-items":"",flat:"","hide-no-data":"","hide-details":"",label:"Description","solo-inverted":""},on:{"update:searchInput":function(e){t.search=e},"update:search-input":function(e){t.search=e}},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}})],1),t._v(" "),n("br"),t._v(" "),n("v-skeleton-loader",{attrs:{loading:t.tableReload,type:"table"}},[n("v-divider"),t._v(" "),n("br")],1),t._v(" "),t._l(t.transactionsSuggestion,(function(e){return n("div",{key:e.index},[t._v("\n      "+t._s(e.description)+"\n    ")])})),t._v(" "),t._l(t.distinctServices,(function(e){return n("div",{key:e.id},[n("v-skeleton-loader",{attrs:{loading:t.tableReload,type:"table"}},[n("h2",{staticClass:"d-flex center",attrs:{cols:"12",sm:"3"}},[t._v(t._s(e.name)+" ("+t._s(e.unit)+")")]),t._v(" "),n("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.filterTransaction(e.name),"item-key":"id",itemsPerPage:t.itemsPerPage,"hide-default-footer":""},scopedSlots:t._u([{key:"data",fn:function(){return[n("td",{staticClass:"display-4"})]},proxy:!0},{key:"item.created_at",fn:function(e){var r=e.item;return[n("span",[t._v(t._s(new Date(r.created_at).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})))])]}},{key:"item.total_amount",fn:function(e){var r=e.item;return[n("span",[t._v(t._s(new Number(r.total_amount).toLocaleString(void 0,{minimumFractionDigits:2})))])]}}],null,!0)}),t._v(" "),n("div",{staticClass:"text-lg-right",attrs:{cols:"12",sm:"3",md:"12",lg:"12"}},[n("v-chip",{staticClass:"ma-10 title",attrs:{color:t.totalColor,"text-color":"white",large:""}},[t._v("\n              "+t._s("Total: "+t.totalPerServices(e.name))+"\n            ")])],1)],1)],1)})),t._v(" "),n("v-skeleton-loader",{attrs:{loading:t.reload,type:"table"}},[n("br")])],2)],1)}),[],!1,null,null,null);e.default=component.exports;x()(component,{VAutocomplete:_.a,VBtn:S.a,VChip:C.a,VCol:D.a,VDataTable:k.a,VDatePicker:y.a,VDivider:w.a,VFlex:R.a,VLayout:P.a,VMenu:z.a,VRow:E.a,VSelect:A.a,VSkeletonLoader:T.a,VSpacer:L.a,VTextField:V.a})}}]);